# Linux 每日一命令

### 1.Linux 查看登录日志

**lastlog**

> 打印系统账号最近一次的登录记录情况,解析的是 `/var/log/lastlog` 文件,它是一个 `data file` 类型的文件,文本模式打开无法正常显示。

```shell
Username         Port     From             Latest
root                                       **Never logged in**
daemon                                     **Never logged in**
bin                                        **Never logged in**
sys                                        **Never logged in**
sync                                       **Never logged in**
games                                      **Never logged in**
man                                        **Never logged in**
lp                                         **Never logged in**
mail                                       **Never logged in**
news                                       **Never logged in**
uucp                                       **Never logged in**
proxy                                      **Never logged in**
www-data                                   **Never logged in**
backup                                     **Never logged in**
list                                       **Never logged in**
irc                                        **Never logged in**
gnats                                      **Never logged in**
nobody                                     **Never logged in**
systemd-network                            **Never logged in**
systemd-resolve                            **Never logged in**
systemd-timesync                           **Never logged in**
messagebus                                 **Never logged in**
syslog                                     **Never logged in**
_apt                                       **Never logged in**
tss                                        **Never logged in**
uuidd                                      **Never logged in**
tcpdump                                    **Never logged in**
sshd                                       **Never logged in**
landscape                                  **Never logged in**
pollinate                                  **Never logged in**
yum                                        **Never logged in**
```

**last**

> 它默认读取的是 `/var/log/wtmp` 文件的信息。输出的内容包括：用户名、终端位置、登录源信息、开始时间、结束时间、持续时间。注意最后一行输出的是 `wtmp` 文件起始记录的时间。当然也可以通过 `last -f` 参数指定读取文件，可以是 `/var/log/btmp`、`/var/run/utmp`。

```shell
# last
wtmp begins Sat Apr  3 13:55:25 2021

# sudo last -f /var/log/btmp
btmp begins Sat Apr  3 13:55:25 2021

# sudo last -f /var/run/utmp
last: cannot open /var/run/utmp: No such file or directory
```

**lastb**

> 列出失败尝试的登录信息，和 `last` 命令功能完全相同，只不过它默认读取的是 `/var/log/btmp` 文件的信息。当然也可以通过 `last -f` 参数指定读取文件，可以是 `/var/log/btmp`、`/var/run/utmp`。

```shell
# sudo lastb
btmp begins Sat Apr  3 13:55:25 2021

# sudo lastb -f /var/log/btmp
btmp begins Sat Apr  3 13:55:25 2021

# sudo lastb -f /var/run/utmp
lastb: cannot open /var/run/utmp: No such file or directory
```

### 2.`ls`

`ls` 命令是 linux 下最常用的命令。`ls` 命令就是 list 的缩写。`ls` 用来打印出当前目录的清单，如果 `ls` 指定其他目录，那么就会显示指定目录里的文件及文件夹清单。

通过 `ls` 命令不仅可以查看 linux 文件夹包含的文件，而且可以查看文件权限 (包括目录、文件夹、文件权限)查看目录信息等等。

```
ls [参数] [目录名]
```

```shell
# 列出文件夹下的所有文件和目录的详细资料
# ls -l -R /linux_demo
# or
# ls -lR /linux_demo
linux_demo:
total 624
-rw-rw-rw- 1 yum yum 630927 Jul 20  2015 Linus.png
-rw-rw-rw- 1 yum yum    633 Apr  3 14:20 tests.md

# 列出 **当前目录中** 所有以 “t” 开头的目录的详细内容
# ls -l l*
total 624
-rw-rw-rw- 1 yum yum 630927 Jul 20  2015 Linus.png
-rw-rw-rw- 1 yum yum    633 Apr  3 14:20 tests.md

# 只列出文件下的子目录
# ls -F /opt/soft | grep /$
```
